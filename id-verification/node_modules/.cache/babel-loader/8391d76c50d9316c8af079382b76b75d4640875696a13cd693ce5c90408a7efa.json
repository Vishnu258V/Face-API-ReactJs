{"ast":null,"code":"var _jsxFileName = \"C:\\\\FaceAPI\\\\id-verification\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport * as faceapi from 'face-api.js';\nimport idCardImage from \"./images/Vishnu_ID_Card.png\";\nimport selfieImage from \"./images/selfie-with-specs.jpg\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const idCardRef = useRef();\n  const selfieRef = useRef();\n  const idCardCanvasRef = useRef();\n  const selfieCanvasRef = useRef();\n  const isFirstRender = useRef(true);\n  const [matchResult, setMatchResult] = useState(\"\");\n  const renderFace = async (image, detection, canvasRef) => {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = detection.box;\n    const canvas = canvasRef.current;\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(image, x, y, width, height, 0, 0, width, height);\n  };\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n    (async () => {\n      // Load models\n      await Promise.all([faceapi.nets.ssdMobilenetv1.loadFromUri(\"/models\"), faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"), faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"), faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"), faceapi.nets.faceExpressionNet.loadFromUri(\"/models\")]);\n\n      // Detect faces\n      const idCardFaceDetection = await faceapi.detectSingleFace(idCardRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceDescriptor();\n      const selfieFaceDetection = await faceapi.detectSingleFace(selfieRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceDescriptor();\n\n      // Compare faces\n      if (idCardFaceDetection && selfieFaceDetection) {\n        const distance = faceapi.euclideanDistance(idCardFaceDetection.descriptor, selfieFaceDetection.descriptor);\n        const threshold = 0.6; // Adjust this value as needed\n        const match = distance < threshold;\n        setMatchResult(match ? \"The faces match!\" : \"The faces do not match.\");\n\n        // Render detected faces\n        renderFace(idCardRef.current, idCardFaceDetection.detection, idCardCanvasRef);\n        renderFace(selfieRef.current, selfieFaceDetection.detection, selfieCanvasRef);\n      } else {\n        setMatchResult(\"Could not detect faces in both images.\");\n      }\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        ref: idCardRef,\n        src: idCardImage,\n        alt: \"ID Card\",\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: idCardCanvasRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        ref: selfieRef,\n        src: selfieImage,\n        alt: \"Selfie\",\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: selfieCanvasRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: matchResult\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"KS1JUQX0fMIpNEFoAWBaSw5bJeM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useRef","useState","faceapi","idCardImage","selfieImage","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","idCardRef","selfieRef","idCardCanvasRef","selfieCanvasRef","isFirstRender","matchResult","setMatchResult","renderFace","image","detection","canvasRef","x","y","width","height","box","canvas","current","ctx","getContext","drawImage","Promise","all","nets","ssdMobilenetv1","loadFromUri","tinyFaceDetector","faceLandmark68Net","faceRecognitionNet","faceExpressionNet","idCardFaceDetection","detectSingleFace","TinyFaceDetectorOptions","withFaceLandmarks","withFaceDescriptor","selfieFaceDetection","distance","euclideanDistance","descriptor","threshold","match","children","ref","src","alt","style","display","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/FaceAPI/id-verification/src/App.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport * as faceapi from 'face-api.js';\nimport idCardImage from \"./images/Vishnu_ID_Card.png\";\nimport selfieImage from \"./images/selfie-with-specs.jpg\";\n\nfunction App() {\n  const idCardRef = useRef();\n  const selfieRef = useRef();\n  const idCardCanvasRef = useRef();\n  const selfieCanvasRef = useRef();\n  const isFirstRender = useRef(true);\n  const [matchResult, setMatchResult] = useState(\"\");\n\n  const renderFace = async (image, detection, canvasRef) => {\n    const { x, y, width, height } = detection.box;\n    const canvas = canvasRef.current;\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(image, x, y, width, height, 0, 0, width, height);\n  };\n\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    (async () => {\n      // Load models\n      await Promise.all([\n        faceapi.nets.ssdMobilenetv1.loadFromUri(\"/models\"),\n        faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"),\n        faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\n        faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),\n        faceapi.nets.faceExpressionNet.loadFromUri(\"/models\")\n      ]);\n\n      // Detect faces\n      const idCardFaceDetection = await faceapi\n        .detectSingleFace(idCardRef.current, new faceapi.TinyFaceDetectorOptions())\n        .withFaceLandmarks()\n        .withFaceDescriptor();\n\n      const selfieFaceDetection = await faceapi\n        .detectSingleFace(selfieRef.current, new faceapi.TinyFaceDetectorOptions())\n        .withFaceLandmarks()\n        .withFaceDescriptor();\n\n      // Compare faces\n      if (idCardFaceDetection && selfieFaceDetection) {\n        const distance = faceapi.euclideanDistance(\n          idCardFaceDetection.descriptor,\n          selfieFaceDetection.descriptor\n        );\n\n        const threshold = 0.6; // Adjust this value as needed\n        const match = distance < threshold;\n\n        setMatchResult(match ? \"The faces match!\" : \"The faces do not match.\");\n\n        // Render detected faces\n        renderFace(idCardRef.current, idCardFaceDetection.detection, idCardCanvasRef);\n        renderFace(selfieRef.current, selfieFaceDetection.detection, selfieCanvasRef);\n      } else {\n        setMatchResult(\"Could not detect faces in both images.\");\n      }\n    })();\n  }, []);\n\n  return (\n    <>\n      <div>\n        <img ref={idCardRef} src={idCardImage} alt=\"ID Card\" style={{display: 'none'}} />\n        <canvas ref={idCardCanvasRef}></canvas>\n      </div>\n      <div>\n        <img ref={selfieRef} src={selfieImage} alt=\"Selfie\" style={{display: 'none'}} />\n        <canvas ref={selfieCanvasRef}></canvas>\n      </div>\n      <h1>{matchResult}</h1>\n    </>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}