{"ast":null,"code":"var _jsxFileName = \"C:\\\\FaceAPI\\\\id-verification\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport * as faceapi from 'face-api.js';\nimport idCardImage from \"./images/Vishnu_ID_Card.png\"; // Importing image\nimport selfieImage from \"./images/selfie-without-specs.jpg\"; // Importing image\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const idCardRef = useRef();\n  const selfieRef = useRef();\n  const isFirstRender = useRef(true);\n  const [matchResult, setMatchResult] = useState(\"\");\n  const renderFace = async (image, x, y, width, height) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    const context = canvas.getContext(\"2d\");\n    context === null || context === void 0 ? void 0 : context.drawImage(image, x, y, width, height, 0, 0, width, height);\n    canvas.toBlob(blob => {\n      image.src = URL.createObjectURL(blob);\n    }, \"image/jpeg\");\n  };\n  useEffect(() => {\n    // Prevent the function from executing on the first render\n    if (isFirstRender.current) {\n      isFirstRender.current = false; // toggle flag after first render/mounting\n      return;\n    }\n    (async () => {\n      // loading the models\n      await faceapi.nets.ssdMobilenetv1.loadFromUri(\"/models\");\n      await faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\");\n      await faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\");\n      await faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\");\n      await faceapi.nets.faceExpressionNet.loadFromUri(\"/models\");\n\n      // detect a single face from the ID card image\n      const idCardFaceDetection = await faceapi.detectSingleFace(idCardRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceDescriptor();\n\n      // detect a single face from the selfie image\n      const selfieFaceDetection = await faceapi.detectSingleFace(selfieRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceDescriptor();\n\n      //(OPTIONAL)\n      /**\n       * If a face was detected from the ID card image,\n       * call our renderFace() method to display the detected face.\n       */\n      if (idCardFaceDetection) {\n        const {\n          x,\n          y,\n          width,\n          height\n        } = idCardFaceDetection.detection.box;\n        renderFace(idCardRef.current, x, y, width, height);\n      }\n      //(OPTIONAL)\n      /**\n       * If a face was detected from the selfie image,\n       * call our renderFace() method to display the detected face.\n       */\n      if (selfieFaceDetection) {\n        const {\n          x,\n          y,\n          width,\n          height\n        } = selfieFaceDetection.detection.box;\n        renderFace(selfieRef.current, x, y, width, height);\n      }\n\n      // Compare faces\n      if (idCardFaceDetection && selfieFaceDetection) {\n        const distance = faceapi.euclideanDistance(idCardFaceDetection.descriptor, selfieFaceDetection.descriptor);\n        const threshold = 0.6; // Adjust this value as needed\n        const match = distance < threshold;\n        setMatchResult(match ? \"The faces match!\" : \"The faces do not match.\");\n\n        // // Render detected faces (optional)\n        // renderFace(idCardRef.current, idCardFaceDetection.detection.box);\n        // renderFace(selfieRef.current, selfieFaceDetection.detection.box);\n      } else {\n        setMatchResult(\"Could not detect faces in both images.\");\n      }\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gallery\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        ref: idCardRef,\n        src: idCardImage,\n        alt: \"ID card\",\n        style: {\n          height: \"auto\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gallery\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        ref: selfieRef,\n        src: selfieImage,\n        alt: \"Selfie\",\n        style: {\n          height: \"auto\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"match-result\",\n      children: matchResult\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"K1Td5wFEMMIUB9iH9tiOqSlx9O4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useRef","useState","faceapi","idCardImage","selfieImage","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","idCardRef","selfieRef","isFirstRender","matchResult","setMatchResult","renderFace","image","x","y","width","height","canvas","document","createElement","context","getContext","drawImage","toBlob","blob","src","URL","createObjectURL","current","nets","ssdMobilenetv1","loadFromUri","tinyFaceDetector","faceLandmark68Net","faceRecognitionNet","faceExpressionNet","idCardFaceDetection","detectSingleFace","TinyFaceDetectorOptions","withFaceLandmarks","withFaceDescriptor","selfieFaceDetection","detection","box","distance","euclideanDistance","descriptor","threshold","match","children","className","ref","alt","style","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/FaceAPI/id-verification/src/App.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport * as faceapi from 'face-api.js';\nimport idCardImage from \"./images/Vishnu_ID_Card.png\"; // Importing image\nimport selfieImage from \"./images/selfie-without-specs.jpg\"; // Importing image\n\nfunction App() {\n  const idCardRef = useRef();\n  const selfieRef = useRef();\n  const isFirstRender = useRef(true);\n  const [matchResult, setMatchResult] = useState(\"\");\n\n\n  const renderFace = async (image, x, y, width, height) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    const context = canvas.getContext(\"2d\");\n\n    context?.drawImage(image, x, y, width, height, 0, 0, width, height);\n    canvas.toBlob((blob) => {\n      image.src = URL.createObjectURL(blob);\n    }, \"image/jpeg\");\n  };\n\n  useEffect(() => {\n    // Prevent the function from executing on the first render\n    if (isFirstRender.current) {\n      isFirstRender.current = false; // toggle flag after first render/mounting\n      return;\n    }\n\n    (async () => {\n      // loading the models\n      await faceapi.nets.ssdMobilenetv1.loadFromUri(\"/models\");\n      await faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\");\n      await faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\");\n      await faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\");\n      await faceapi.nets.faceExpressionNet.loadFromUri(\"/models\");\n\n      // detect a single face from the ID card image\n      const idCardFaceDetection = await faceapi\n        .detectSingleFace(\n          idCardRef.current,\n          new faceapi.TinyFaceDetectorOptions()\n        )\n        .withFaceLandmarks()\n        .withFaceDescriptor();\n\n      // detect a single face from the selfie image\n      const selfieFaceDetection = await faceapi\n        .detectSingleFace(\n          selfieRef.current,\n          new faceapi.TinyFaceDetectorOptions()\n        )\n        .withFaceLandmarks()\n        .withFaceDescriptor();\n\n      //(OPTIONAL)\n      /**\n       * If a face was detected from the ID card image,\n       * call our renderFace() method to display the detected face.\n       */\n      if (idCardFaceDetection) {\n        const { x, y, width, height } = idCardFaceDetection.detection.box;\n        renderFace(idCardRef.current, x, y, width, height);\n      }\n      //(OPTIONAL)\n      /**\n       * If a face was detected from the selfie image,\n       * call our renderFace() method to display the detected face.\n       */\n      if (selfieFaceDetection) {\n        const { x, y, width, height } = selfieFaceDetection.detection.box;\n        renderFace(selfieRef.current, x, y, width, height);\n      }\n\n\n     // Compare faces\n     if (idCardFaceDetection && selfieFaceDetection) {\n      const distance = faceapi.euclideanDistance(\n        idCardFaceDetection.descriptor,\n        selfieFaceDetection.descriptor\n      );\n\n      const threshold = 0.6; // Adjust this value as needed\n      const match = distance < threshold;\n\n      setMatchResult(match ? \"The faces match!\" : \"The faces do not match.\");\n\n      // // Render detected faces (optional)\n      // renderFace(idCardRef.current, idCardFaceDetection.detection.box);\n      // renderFace(selfieRef.current, selfieFaceDetection.detection.box);\n    } else {\n      setMatchResult(\"Could not detect faces in both images.\");\n    }\n\n\n\n    })();\n  }, []);\n\n  return (\n    <>\n      <div className=\"gallery\">\n        <img\n          ref={idCardRef}\n          src={idCardImage}\n          alt=\"ID card\"\n          style={{ height: \"auto\" }}\n        />\n      </div>\n\n      <div className=\"gallery\">\n        <img\n          ref={selfieRef}\n          src={selfieImage}\n          alt=\"Selfie\"\n          style={{ height: \"auto\" }}\n        />\n      </div>\n      <div className=\"match-result\">{matchResult}</div>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}